<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
<%_ if (admin) { -%>
  // Highlight changes in form inputs
  $(document).on('input', '.form-control', function(event) {
    $(this).addClass('bg-dark text-white');
  });

  // Create a new statistic
  $(document).on('click', '.create', function(event) {
    const form = $(this).closest('form');
    const opt = $(this).closest('option')
    event.preventDefault();
    $.ajax({method: 'post', url: '/statistics', data: form.serialize()})
      .done(function(id) {
        form.attr('id', id);
      })
      .fail(error => alert(error.responseText));

      $.ajax({method: 'put', url: '/counties/${opt.attr('value')', data: form.serialize()})
        .done(function(id) {
          form.attr('id', id);
          form.find('.form-control').removeClass('bg-dark text-white');
        })
        .fail(error => alert(error.responseText));
  	});

<%_ } else { -%>

  $(document).on('click', '#sort', function(event) {
    const tbody = $('#display tbody');
    tbody.html($('tr',tbody).get().reverse())
  });

  // filter
  $(document).ready(function(){
  $("#filter").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#statistics tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
<%_ } -%>
</script>
